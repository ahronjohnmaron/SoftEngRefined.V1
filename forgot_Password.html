<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Forgot Password | Communication Hub</title>
Â  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
Â  <script src="susi.js"></script>
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
Â  <script>
Â  Â  tailwind.config = {
Â  Â  Â  darkMode: 'class',
Â  Â  Â  theme: {
Â  Â  Â  Â  extend: {
Â  Â  Â  Â  Â  colors: {
Â  Â  Â  Â  Â  Â  'wise-green': '#9FE870',
Â  Â  Â  Â  Â  Â  'wise-green-hover': '#7acc50',
Â  Â  Â  Â  Â  Â  'wise-forest': '#163300',
Â  Â  Â  Â  Â  Â  'wise-dark': '#0f0f0f',
Â  Â  Â  Â  Â  Â  'wise-black': '#000000',
Â  Â  Â  Â  Â  Â  'wise-gray': '#1a1a1a',
Â  Â  Â  Â  Â  Â  'wise-light-gray': '#b8d6a0',
Â  Â  Â  Â  Â  Â  'wise-border': '#2d5514',
Â  Â  Â  Â  Â  Â  'wise-light-bg': '#f5faf2',
Â  Â  Â  Â  Â  Â  'wise-light-secondary': '#e8f5e0',
Â  Â  Â  Â  Â  Â  'wise-light-border': '#c9e5ba',
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  }
Â  </script>
Â  <style>
Â  Â  body {Â 
Â  Â  Â  font-family: 'Inter', sans-serif;
Â  Â  Â  transition: background-color 0.3s ease, color 0.3s ease;
Â  Â  }

Â  Â  /* Light mode styles */
Â  Â  body:not(.dark) {
Â  Â  Â  background-color: #f5faf2;
Â  Â  }

Â  Â  body:not(.dark) .container {
Â  Â  Â  background-color: #ffffff;
Â  Â  Â  border-color: #c9e5ba;
Â  Â  }

Â  Â  body:not(.dark) input {
Â  Â  Â  background-color: #e8f5e0;
Â  Â  Â  border-color: #c9e5ba;
Â  Â  Â  color: #163300;
Â  Â  }

Â  Â  body:not(.dark) input::placeholder {
Â  Â  Â  color: #2d5514;
Â  Â  Â  opacity: 0.6;
Â  Â  }

Â  Â  body:not(.dark) input:focus {
Â  Â  Â  background-color: #ffffff;
Â  Â  Â  border-color: #7acc50;
Â  Â  }

Â  Â  body:not(.dark) .text-subtitle {
Â  Â  Â  color: #2d5514;
Â  Â  }

Â  Â  body:not(.dark) .modal-bg {
Â  Â  Â  background-color: rgba(0, 0, 0, 0.6);
Â  Â  }

Â  Â  body:not(.dark) .modal-content {
Â  Â  Â  background-color: #ffffff;
Â  Â  Â  border: 1px solid #c9e5ba;
Â  Â  }

Â  Â  /* ðŸŒŸ ADDED: Password requirement styles */
Â  Â  .password-requirement .fa-check-circle { display: none; }
Â  Â  .password-requirement .fa-times-circle { display: inline-block; }
Â  Â  body:not(.dark) .password-requirement .fa-times-circle { color: #ef4444; }
Â  Â  body.dark .password-requirement .fa-times-circle { color: #ef4444; opacity: 0.7; }
Â  Â Â 
Â  Â  .password-requirement.met { color: #9FE870; } /* wise-green */
Â  Â  body:not(.dark) .password-requirement.met { color: #2d5514; }

Â  Â  .password-requirement.met .fa-check-circle { display: inline-block; }
Â  Â  .password-requirement.met .fa-times-circle { display: none; }

Â  Â  /* ðŸŒŸ ADDED: Strength bar colors */
Â  Â  .password-strength-fill { transition: width 0.3s ease, background-color 0.3s ease; }
Â  Â  .password-strength-fill.weak { width: 33%; background-color: #ef4444; } /* red-500 */
Â  Â  .password-strength-fill.medium { width: 66%; background-color: #f59e0b; } /* yellow-500 */
Â  Â  .password-strength-fill.strong { width: 100%; background-color: #9FE870; } /* wise-green */
Â  </style>
</head>
<body class="dark bg-wise-black flex items-center justify-center min-h-screen p-4">

Â  <div class="container bg-wise-dark p-8 rounded-2xl shadow-2xl w-full max-w-md border border-wise-border">
Â  Â Â 
Â  Â  Â  Â  <div class="flex justify-end mb-4">
Â  Â  Â  <button id="themeToggle" class="bg-wise-gray text-wise-light-gray px-3 py-2 rounded-xl border border-wise-border hover:bg-wise-border hover:text-white hover:border-wise-green transition-all duration-300 text-sm font-semibold">
Â  Â  Â  Â  <i class="fas fa-moon" id="themeIcon"></i>
Â  Â  Â  </button>
Â  Â  </div>

Â  Â  Â  Â  <div class="text-center mb-6">
Â  Â  Â  <div class="mx-auto w-20 h-20 mb-4">
Â  Â  Â  Â  <img src="CCSICTLOGOCROP.png" alt="Logo" class="w-full h-full rounded-full border-4 border-wise-green shadow-lg shadow-wise-green/50">
Â  Â  Â  </div>
Â  Â  Â  <h2 class="text-2xl sm:text-3xl font-bold text-wise-green mb-2">Forgot Password</h2>
Â  Â  Â  <p class="text-subtitle text-wise-light-gray text-sm">Enter your registered email address</p>
Â  Â  </div>

Â  Â  Â  Â  <form id="emailForm" class="space-y-4">
Â  Â  Â  <input type="email" id="emailInput" required placeholder="Email Address"
Â  Â  Â  Â  Â  Â  Â class="w-full bg-wise-gray text-white px-4 py-3 rounded-xl border-2 border-wise-border focus:outline-none focus:border-wise-green focus:ring-4 focus:ring-wise-green/30 transition-all">
Â  Â  Â  <button type="submit" id="sendOtpBtn"
Â  Â  Â  Â  Â  Â  Â  class="w-full bg-gradient-to-r from-wise-green to-wise-green-hover hover:shadow-lg hover:shadow-wise-green/30 font-bold text-black py-3 rounded-xl transition-all transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed">
Â  Â  Â  Â  Â  Â  Â  Send OTP Code
Â  Â  Â  </button>
Â  Â  </form>

Â  Â  <p id="emailMessage" class="text-sm text-center mt-4 min-h-[24px]"></p>

Â  Â  Â  Â  <div id="otpModal" class="modal-bg hidden fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 backdrop-blur-sm">
Â  Â  Â  <div class="modal-content bg-wise-gray p-6 sm:p-8 rounded-2xl w-full max-w-sm text-center shadow-2xl shadow-wise-green/30 border border-wise-green">
Â  Â  Â  Â  <h3 class="text-xl sm:text-2xl font-bold text-wise-green mb-2">Verify OTP</h3>
Â  Â  Â  Â  <p class="text-wise-light-gray text-sm mb-4">Enter the 6-digit code sent to your email</p>
Â  Â  Â  Â  <input type="text" id="otpCode" maxlength="6" placeholder="000000"
Â  Â  Â  Â  Â  Â  Â  Â class="w-full px-4 py-3 mb-4 bg-wise-black text-white text-center text-2xl tracking-widest border-2 border-wise-border rounded-xl focus:outline-none focus:border-wise-green focus:ring-4 focus:ring-wise-green/30 transition-all">
Â  Â  Â  Â  <button id="verifyOtpBtn"
Â  Â  Â  Â  Â  Â  Â  Â  class="w-full bg-gradient-to-r from-wise-green to-wise-green-hover hover:shadow-lg hover:shadow-wise-green/30 font-bold text-black py-3 rounded-xl transition-all transform hover:-translate-y-1">
Â  Â  Â  Â  Â  Â  Â  Â  Verify Code
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <p id="otpMessage" class="text-sm mt-3 min-h-[20px]"></p>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <form id="resetForm" class="hidden mt-6 space-y-4">
Â  Â  Â  Â  Â  Â  <div class="relative">
Â  Â  Â  Â  <input type="password" id="newPassword" required placeholder="Enter New Password"
Â  Â  Â  Â  Â  Â  Â  Â class="w-full bg-wise-gray text-white px-4 py-3 rounded-xl border-2 border-wise-border focus:outline-none focus:border-wise-green focus:ring-4 focus:ring-wise-green/30 transition-all pr-12">
Â  Â  Â  Â  <button type="button" id="toggleNewPassword" class="absolute right-4 top-1/2 -translate-y-1/2 text-wise-light-gray hover:text-wise-green transition-colors duration-300">
Â  Â  Â  Â  Â  Â  <i class="fas fa-eye-slash" id="toggleIcon"></i>
Â  Â  Â  Â  </button>
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="text-left text-xs space-y-1">
Â  Â  Â  Â  <div id="passwordStrength" class="h-2 w-full bg-wise-gray rounded-full overflow-hidden border border-wise-border">
Â  Â  Â  Â  Â  <div id="strengthBar" class="password-strength-fill h-full rounded-full"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <ul class="pt-2 grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-1">
Â  Â  Â  Â  Â  <li id="req-length" class="password-requirement text-wise-light-gray">
Â  Â  Â  Â  Â  Â  <i class="fas fa-times-circle"></i><i class="fas fa-check-circle"></i>
Â  Â  Â  Â  Â  Â  <span class="ml-1">8 characters minimum</span>
Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  <li id="req-uppercase" class="password-requirement text-wise-light-gray">
Â  Â  Â  Â  Â  Â  <i class="fas fa-times-circle"></i><i class="fas fa-check-circle"></i>
Â  Â  Â  Â  Â  Â  <span class="ml-1">1 uppercase letter</span>
Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  <li id="req-lowercase" class="password-requirement text-wise-light-gray">
Â  Â  Â  Â  Â  Â  <i class="fas fa-times-circle"></i><i class="fas fa-check-circle"></i>
Â  Â  Â  Â  Â  Â  <span class="ml-1">1 lowercase letter</span>
Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  <li id="req-number" class="password-requirement text-wise-light-gray">
Â  Â  Â  Â  Â  Â  <i class="fas fa-times-circle"></i><i class="fas fa-check-circle"></i>
Â  Â  Â  Â  Â  Â  <span class="ml-1">1 number</span>
Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  <li id="req-special" class="password-requirement text-wise-light-gray">
Â  Â  Â  Â  Â  Â  <i class="fas fa-times-circle"></i><i class="fas fa-check-circle"></i>
Â  Â  Â  Â  Â  Â  <span class="ml-1">1 special character</span>
Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  </ul>
Â  Â  Â  </div>

Â  Â  Â  <button type="submit" id="updatePasswordBtn"
Â  Â  Â  Â  Â  Â  Â  class="w-full bg-gradient-to-r from-wise-green to-wise-green-hover hover:shadow-lg hover:shadow-wise-green/30 font-bold text-black py-3 rounded-xl transition-all transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed">
Â  Â  Â  Â  Â  Â  Â  Update Password
Â  Â  Â  </button>
Â  Â  Â  <p id="resetMessage" class="text-sm text-center mt-4 min-h-[24px]"></p>
Â  Â  </form>

Â  Â  Â  Â  <div class="mt-6">
Â  Â  Â  <a href="index.html" class="inline-flex items-center gap-2 text-sm text-wise-light-gray hover:text-wise-green transition-colors duration-300">
Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Back to Login
Â  Â  Â  </a>
Â  Â  </div>

Â  </div>

<script>
Â  // ============================================
Â  // THEME TOGGLE FUNCTIONALITY (Unchanged)
Â  // ============================================
Â  function initTheme() {
Â  Â  const savedTheme = localStorage.getItem('forgotPasswordTheme') || 'dark';
Â  Â  const body = document.body;
Â  Â  const themeIcon = document.getElementById('themeIcon');
Â  Â Â 
Â  Â  if (savedTheme === 'light') {
Â  Â  Â  body.classList.remove('dark');
Â  Â  Â  themeIcon.classList.remove('fa-moon');
Â  Â  Â  themeIcon.classList.add('fa-sun');
Â  Â  } else {
Â  Â  Â  body.classList.add('dark');
Â  Â  Â  themeIcon.classList.remove('fa-sun');
Â  Â  Â  themeIcon.classList.add('fa-moon');
Â  Â  }
Â  }

Â  function toggleTheme() {
Â  Â  const body = document.body;
Â  Â  const themeIcon = document.getElementById('themeIcon');
Â  Â Â 
Â  Â  body.classList.toggle('dark');
Â  Â Â 
Â  Â  if (body.classList.contains('dark')) {
Â  Â  Â  themeIcon.classList.remove('fa-sun');
Â  Â  Â  themeIcon.classList.add('fa-moon');
Â  Â  Â  localStorage.setItem('forgotPasswordTheme', 'dark');
Â  Â  } else {
Â  Â  Â  themeIcon.classList.remove('fa-moon');
Â  Â  Â  themeIcon.classList.add('fa-sun');
Â  Â  Â  localStorage.setItem('forgotPasswordTheme', 'light');
Â  Â  }
Â  }

Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  initTheme();
Â  Â  document.getElementById('themeToggle').addEventListener('click', toggleTheme);
Â  });
Â  
Â  // Initialize EmailJS
Â  (function() {
Â  Â  emailjs.init('tbAldsuV0ZauR0pr0');
Â  })();

Â  // --- Main Supabase Client ---
Â  // (susi.js should already define supabaseClient, but if not, uncomment these)
Â  // const supabaseUrl = 'https://dqtictujkhxultwoaqaw.supabase.co';
Â  // const supabaseKey = 'YOUR_SUPABASE_KEY';
Â  // const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

Â  // --- Form Elements ---
Â  const emailForm = document.getElementById('emailForm');
Â  const otpModal = document.getElementById('otpModal');
Â  const resetForm = document.getElementById('resetForm');
Â  const emailInput = document.getElementById('emailInput');
Â  const otpCode = document.getElementById('otpCode');
Â  const newPasswordInput = document.getElementById('newPassword');
Â  const emailMessage = document.getElementById('emailMessage');
Â  const otpMessage = document.getElementById('otpMessage');
Â  const resetMessage = document.getElementById('resetMessage');
Â  const sendOtpBtn = document.getElementById('sendOtpBtn');
Â  const updatePasswordBtn = document.getElementById('updatePasswordBtn');

Â  // --- ðŸŒŸ ADDED: Password UI Elements ---
Â  const strengthBar = document.getElementById('strengthBar');
Â  const toggleNewPassword = document.getElementById('toggleNewPassword');
Â  const toggleIcon = document.getElementById('toggleIcon');

Â  let currentEmail = '';
Â  let generatedOtp = '';

Â  // ============================================
Â  // ðŸŒŸ ADDED: PASSWORD VALIDATION LOGIC
Â  // (Copied from your basis script)
Â  // ============================================
Â  const passwordRequirements = {
Â  Â  length: /.{8,}/,
Â  Â  uppercase: /[A-Z]/,
Â  Â  lowercase: /[a-z]/,
Â  Â  number: /[0-9]/,
Â  Â  special: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/
Â  };

Â  function isPasswordStrong(password) {
Â  Â  return Object.values(passwordRequirements).every(regex => regex.test(password));
Â  }

Â  // Live password validation listener
Â  newPasswordInput.addEventListener('input', function() {
Â  Â  const password = this.value;
Â  Â  let metCount = 0;

Â  Â  // Check each requirement
Â  Â  for (const [key, regex] of Object.entries(passwordRequirements)) {
Â  Â  Â  const element = document.getElementById(`req-${key}`);
Â  Â  Â  if (regex.test(password)) {
Â  Â  Â  Â  element.classList.add('met');
Â  Â  Â  Â  metCount++;
Â  Â  Â  } else {
Â  Â  Â  Â  element.classList.remove('met');
Â  Â  Â  }
Â  Â  }

Â  Â  // Update strength bar
Â  Â  strengthBar.className = 'password-strength-fill h-full rounded-full'; // Reset classes
Â  Â  if (metCount === 5) {
Â  Â  Â  strengthBar.classList.add('strong');
Â  Â  } else if (metCount >= 3) {
Â  Â  Â  strengthBar.classList.add('medium');
Â  Â  } else if (metCount > 0) {
Â  Â  Â  strengthBar.classList.add('weak');
Â  Â  }
Â  });
Â  
Â  // Password toggle (show/hide) listener
Â  toggleNewPassword.addEventListener('click', () => {
Â  Â  if (newPasswordInput.type === 'password') {
Â  Â  Â  newPasswordInput.type = 'text';
Â  Â  Â  toggleIcon.classList.remove('fa-eye-slash');
Â  Â  Â  toggleIcon.classList.add('fa-eye');
Â  Â  } else {
Â  Â  Â  newPasswordInput.type = 'password';
Â  Â  Â  toggleIcon.classList.remove('fa-eye');
Â  Â  Â  toggleIcon.classList.add('fa-eye-slash');
Â  Â  }
Â  });

Â  // ============================================
Â  // STEP 1: Check email and send OTP (Unchanged)
Â  // ============================================
Â  emailForm.addEventListener('submit', async (e) => {
Â  Â  e.preventDefault();
Â  Â  currentEmail = emailInput.value.trim();
Â  Â  emailMessage.textContent = 'Checking email...';
Â  Â  emailMessage.classList.remove('text-red-500', 'text-green-500');
Â  Â  emailMessage.classList.add('text-wise-light-gray');
Â  Â  sendOtpBtn.disabled = true;

Â  Â  try {
Â  Â  Â  const { data: userData, error } = await supabaseClient
Â  Â  Â  Â  .from('members')
Â  Â  Â  Â  .select('email')
Â  Â  Â  Â  .eq('email', currentEmail)
Â  Â  Â  Â  .maybeSingle();

Â  Â  Â  if (error) {
Â  Â  Â  Â  console.error('Supabase error:', error);
Â  Â  Â  Â  emailMessage.textContent = 'âœ— Error checking email. Please try again.';
Â  Â  Â  Â  emailMessage.classList.add('text-red-500');
Â  Â  Â  Â  sendOtpBtn.disabled = false;
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  if (!userData) {
Â  Â  Â  Â  emailMessage.textContent = 'âœ— No account found with this email address.';
Â  Â  Â  Â  emailMessage.classList.add('text-red-500');
Â  Â  Â  Â  sendOtpBtn.disabled = false;
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  generatedOtp = String(Math.floor(100000 + Math.random() * 900000));
Â  Â  Â  emailMessage.textContent = 'Sending OTP to your email...';

Â  Â  Â  const templateParams = {
Â  Â  Â  Â  to_email: currentEmail,
Â  Â  Â  Â  otp_code: generatedOtp,
Â  Â  Â  Â  reply_to: currentEmail
Â  Â  Â  };
Â  Â  Â Â 
Â  Â  Â  await emailjs.send('service_zlsxlxc', 'template_n48tvic', templateParams);

Â  Â  Â  emailMessage.textContent = 'âœ“ OTP sent successfully! Check your email.';
Â  Â  Â  emailMessage.classList.remove('text-red-500');
Â  Â  Â  emailMessage.classList.add('text-green-500');
Â  Â  Â Â 
Â  Â  Â  otpModal.classList.remove('hidden');
Â  Â  } catch (error) {
Â  Â  Â  console.error('Full error details:', error);
Â  Â  Â  emailMessage.textContent = 'âœ— Failed to send OTP. Please check console.';
Â  Â  Â  emailMessage.classList.add('text-red-500');
Â  Â  } finally {
Â  Â  Â  sendOtpBtn.disabled = false;
Â  Â  }
Â  });

Â  // ============================================
Â  // STEP 2: Verify OTP (Unchanged)
Â  // ============================================
Â  document.getElementById('verifyOtpBtn').addEventListener('click', () => {
Â  Â  const enteredOtp = otpCode.value.trim();
Â  Â  otpMessage.textContent = 'Verifying...';
Â  Â  otpMessage.classList.remove('text-red-500', 'text-green-500');
Â  Â  otpMessage.classList.add('text-wise-light-gray');

Â  Â  if (enteredOtp === generatedOtp) {
Â  Â  Â  otpMessage.textContent = 'âœ“ OTP verified successfully!';
Â  Â  Â  otpMessage.classList.add('text-green-500');
Â  Â  Â Â 
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  otpModal.classList.add('hidden');
Â  Â  Â  Â  resetForm.classList.remove('hidden');
Â  x Â  Â  emailForm.classList.add('hidden');
Â  Â  Â  Â  // ðŸŒŸ Focus the new password field
Â  Â  Â  Â  newPasswordInput.focus();
Â  Â  Â  }, 1000);
Â  Â  } else {
Â  Â  Â  otpMessage.textContent = 'âœ— Invalid OTP code. Please try again.';
Â  Â  Â  otpMessage.classList.add('text-red-500');
Â  Â  Â  otpCode.value = '';
Â  Â  Â  otpCode.focus();
Â  Â  }
Â  });

Â  // ============================================
Â  // ðŸŒŸ MODIFIED: STEP 3: Update password
Â  // ============================================
Â  resetForm.addEventListener('submit', async (e) => {
Â  Â  e.preventDefault();
Â  Â  const newPassword = newPasswordInput.value.trim();
Â  Â  resetMessage.textContent = '';
Â  Â  resetMessage.classList.remove('text-red-500', 'text-green-500');
Â  Â Â 
Â  Â  // --- ðŸŒŸ ADDED VALIDATION CHECK ---
Â  Â  if (!isPasswordStrong(newPassword)) {
Â  Â  Â  resetMessage.textContent = 'âœ— Password does not meet all security requirements.';
Â  Â  Â  resetMessage.classList.add('text-red-500');
Â  Â  Â  newPasswordInput.focus();
Â  Â  Â  return;
Â  Â  }
Â  Â  // --- ðŸŒŸ END OF ADDED CHECK ---
Â  Â Â 
Â  Â  resetMessage.textContent = 'Updating password...';
Â  Â  resetMessage.classList.add('text-wise-light-gray');
Â  Â  updatePasswordBtn.disabled = true;

Â  Â  try {
Â  Â  Â  const { error } = await supabaseClient
Â  Â  Â  Â  .from('members')
Â  Â  Â  Â  .update({ password: newPassword })
Â  Â  Â  Â  .eq('email', currentEmail);

Â  Â  Â  if (error) {
Â  Â  Â  Â  resetMessage.textContent = 'âœ— Failed to update password. Please try again.';
Â  Â  Â  Â  resetMessage.classList.add('text-red-500');
Â  Â  Â  Â  updatePasswordBtn.disabled = false;
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  resetMessage.textContent = 'âœ“ Password updated successfully! Redirecting to login...';
Â  Â  Â  resetMessage.classList.add('text-green-500');
Â  Â  Â Â 
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  // Redirect to login page after successful reset
Â  Â  Â  Â  window.location.href = 'faculty_login.html'; 
Â  Â  Â  }, 2000);

Â  Â  } catch (error) {
Â  Â  Â  resetMessage.textContent = 'âœ— An error occurred. Please try again.';
Â  Â  Â  resetMessage.classList.add('text-red-500');
s Â  Â  console.error('Error:', error);
Â  Â  Â  updatePasswordBtn.disabled = false;
Â  Â  }
Â  });

Â  // Allow only numbers in OTP input (Unchanged)
Â  otpCode.addEventListener('input', (e) => {
Â  Â  e.target.value = e.target.value.replace(/[^0-9]/g, '');
s });
</script>
</body>
</html>
